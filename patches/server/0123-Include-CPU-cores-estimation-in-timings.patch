From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Martijn Muijsers <martijnmuijsers@live.nl>
Date: Sat, 24 Dec 2022 22:03:32 +0100
Subject: [PATCH] Include CPU cores estimation in timings

License: AGPL-3.0 (https://www.gnu.org/licenses/agpl-3.0.html)
Gale - https://galemc.org

diff --git a/src/main/java/co/aikar/timings/TimingsExport.java b/src/main/java/co/aikar/timings/TimingsExport.java
index dc9d304257d86109c06ec9b7673d3ee27d5ee875..32da69dcab868d2fa9775c6384c4403be10c0c97 100644
--- a/src/main/java/co/aikar/timings/TimingsExport.java
+++ b/src/main/java/co/aikar/timings/TimingsExport.java
@@ -37,6 +37,7 @@ import org.bukkit.configuration.MemorySection;
 import org.bukkit.entity.EntityType;
 import org.galemc.gale.configuration.GaleGlobalConfiguration;
 import org.galemc.gale.configuration.timingsexport.VanillaServerPropertiesTimingsExport;
+import org.galemc.gale.util.CPUCoresEstimation;
 import org.json.simple.JSONObject;
 import org.json.simple.JSONValue;
 import oshi.SystemInfo;
@@ -206,6 +207,10 @@ public class TimingsExport extends Thread {
                     pair("finalizing", ManagementFactory.getMemoryMXBean().getObjectPendingFinalizationCount())
                 )),
                 pair("cpu", runtime.availableProcessors()),
+                // Gale start - include CPU cores estimation in timings
+                pair("cpucoresestimation", CPUCoresEstimation.get()),
+                pair("cpuphysicalprocessorcount", processor.getPhysicalProcessorCount()),
+                // Gale end - include CPU cores estimation in timings
                 pair("cpuname", hardwareInfo.getProcessor().getProcessorIdentifier().getName().trim()),
                 pair("hardwarespecs", hardwareSpecsMap), // Gale - include hardware specs in timings
                 pair("runtime", runtimeBean.getUptime()),
